!function(e,t){if("function"==typeof define&&define.amd)define(["exports","backbone.radio"],t);else if("undefined"!=typeof exports)t(exports,require("backbone.radio"));else{var n={exports:{}};t(n.exports,e.backbone),e.index=n.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return function(t,n,o){if(t.events||(t.events={}),"function"==typeof t.events)throw new Error("The on decorator is only compatible with an events object");if(!e)throw new Error("The on decorator requires an eventName argument");return t.addEvent(e,n,t),o}}Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0,e.on=s;var a,l=n(t),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=(e.Component=function(){function e(t){r(this,e),this.radioChannel=l["default"].channel("components:"+t),this.initialize()}return u(e,[{key:"renderComponent",value:function(e,t,n,o){var i=this;void 0!==o&&(this.state=o),void 0===this.events&&(this.events={}),a={elementName:e,element:t,stylesheet:n},this.radioChannel.on("attached",function(e){if(0!==Object.keys(i.events).length&&i.events.constructor===Object){var t=function(t){var n=t.split(" ");e.addEventListener(n[0],function(o){n.length<=2&&void 0!==n[1]?e.shadowRoot.querySelector(n[1]).length<=1?o.path&&o.path[0]===e.shadowRoot.querySelector(n[1])&&i.radioChannel.trigger("eventListenerTriggered",i.events[t],o):e.shadowRoot.querySelectorAll(n[1]).forEach(function(e){o.path&&o.path[0]===e&&i.radioChannel.trigger("eventListenerTriggered",i.events[t],o)}):i.radioChannel.trigger("eventListenerTriggered",i.events[t],o)})};for(var n in i.events)t(n)}})}},{key:"initialize",value:function(){var e=this;this.radioChannel.on("eventListenerTriggered",function(t,n){return e[t](n)})}},{key:"addEvent",value:function(e,t){this.events[e]=t}},{key:"removeEvent",value:function(e,t){void 0!==e&&"function"==typeof t&&(this.element.removeEventListener(e,t),delete this.events[e])}},{key:"element",get:function(){return h},set:function(e){h=e}}]),e}(),function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"createdCallback",value:function(){this._element=a.element,this._stylesheet=a.stylesheet,this._elementName=a.elementName,this.createShadowRoot().innerHTML="<style>"+this.stylesheet.toString()+"</style>"+this.element}},{key:"attachedCallback",value:function(){l["default"].channel("components:"+this._elementName).trigger("attached",this)}},{key:"attributeChangedCallback",value:function(e,t,n){l["default"].channel("components:"+this._elementName).trigger("attributeChanged",{attributeName:e,previousAttribute:t,newAttribute:n})}},{key:"detachedCallback",value:function(){l["default"].channel("components:"+this._elementName).trigger("detached")}},{key:"updateElement",value:function(e,t){void 0!==e&&(this.element=e),void 0!==e&&(this.stylesheet=t),this.hasUpdated&&(this.shadowRoot.innerHTML="<style>"+this.stylesheet.toString()+"</style>"+this.element)}},{key:"element",set:function(e){this.hasUpdated=!0,this._previousElement=this._element,this._element=e},get:function(){return this._element}},{key:"elementName",get:function(){return this._elementName}},{key:"previousElement",get:function(){return this._previousElement}},{key:"stylesheet",set:function(e){this.hasUpdated=!0,this._previousStylesheet=this._stylesheet,this._stylesheet=e},get:function(){return this._stylesheet}},{key:"hasUpdated",set:function(e){if("boolean"!=typeof e)throw new TypeError("Updated can only be a boolean type");this._updated=e,e&&l["default"].channel("components:"+this._elementName).trigger("updated")},get:function(){return this._updated}},{key:"radio",get:function(){return l["default"].channel("components:"+this._elementName)}}]),t}(HTMLElement))});