!function(e,t){if("function"==typeof define&&define.amd)define(["exports","backbone.radio"],t);else if("undefined"!=typeof exports)t(exports,require("backbone.radio"));else{var n={exports:{}};t(n.exports,e.backbone),e.index=n.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return function(t,n,i){if(console.log(t,n,i),t.events||(t.events={}),_.isFunction(t.events))throw new Error("The on decorator is not compatible with an events method");if(!e)throw new Error("The on decorator requires an eventName argument");return t.addEvent(e,n,t),i}}Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0,e.on=s;var a,l=n(t),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=(e.Component=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.elementName,i=t.element,o=t.stylesheet,s=t.state;r(this,e);var u=this;void 0!==s&&(this.state=s),void 0===this.events&&(this.events={}),a={elementName:n,element:i,stylesheet:o},this.radioChannel=l.default.channel("components:"+n),this.radioChannel.on("attached",function(e){if(0!==Object.keys(u.events).length&&u.events.constructor===Object){var t=function(t){e.addEventListener(t,function(e){u.radioChannel.trigger("eventListenerTriggered",u.events[t],e)})};for(var n in u.events)t(n)}}),this.initialize()}return u(e,[{key:"initialize",value:function(){var e=this;this.radioChannel.on("eventListenerTriggered",function(t,n){return e[t](n)})}},{key:"addEvent",value:function(e,t){this.events[e]=t}},{key:"removeEvent",value:function(e,t){void 0!==e&&"function"==typeof t&&(this.element.removeEventListener(e,t),delete this.events[e])}},{key:"element",get:function(){return h}}]),e}(),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"createdCallback",value:function(){this._element=a.element,this._stylesheet=a.stylesheet,this._elementName=a.elementName,this.createShadowRoot().innerHTML="<style>"+this.stylesheet.toString()+"</style>"+this.element,this.hasUpdated&&(a=void 0)}},{key:"attachedCallback",value:function(){l.default.channel("components:"+this._elementName).trigger("attached",this)}},{key:"attributeChangedCallback",value:function(e,t,n){l.default.channel("components:"+this._elementName).trigger("attributeChanged",{attributeName:e,previousAttribute:t,newAttribute:n})}},{key:"detachedCallback",value:function(){l.default.channel("components:"+this._elementName).trigger("detached")}},{key:"updateElement",value:function(e,t){void 0!==e&&(this.element=e),void 0!==e&&(this.stylesheet=t),this.hasUpdated&&(this.shadowRoot.innerHTML="<style>"+this.stylesheet.toString()+"</style>"+this.element)}},{key:"element",set:function(e){this.hasUpdated=!0,this._previousElement=this._element,this._element=e},get:function(){return this._element}},{key:"elementName",get:function(){return this._elementName}},{key:"previousElement",get:function(){return this._previousElement}},{key:"stylesheet",set:function(e){this.hasUpdated=!0,this._previousStylesheet=this._stylesheet,this._stylesheet=e},get:function(){return this._stylesheet}},{key:"hasUpdated",set:function(e){if("boolean"!=typeof e)throw new TypeError("Updated can only be a boolean type");this._updated=e,e&&l.default.channel("components:"+this._elementName).trigger("updated")},get:function(){return this._updated}}]),t}(HTMLElement))});